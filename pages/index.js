import Head from "next/head";
import Feeds from "../components/Feeds";
import Layout from "../components/Layout";

export async function getServerSideProps() {
  const res = await fetch(
    `https://api.nasa.gov/planetary/apod?api_key=${process.env.NEXT_PUBLIC_API_KEY}&count=5`
  );
  const data = await res.json();
  return {
    props: {
      nasa: data
    }
  }
}


export default function Home({nasa}) {

  return (
    <>
      <Head>
        <title>Spacestagram</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

        <Layout>
          <main className=" grid place-items-center h-screen pt-20 space-y-6 ">
            {nasa?.map((d, i) => (
              <div key={i}>
                <Feeds
                  image={d.url}
                  title={d.title}
                  date={d.date}
                  alt={d.title}
                  description={d.explanation}
                />
              </div>
            ))}
          </main>
        </Layout>
    </>
  );
}
